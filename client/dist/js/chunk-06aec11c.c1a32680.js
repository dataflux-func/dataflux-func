(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-06aec11c"],{"00f1":function(t,e,n){},"0cf1":function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"zh-HK":{"Download as a JSON file":"作為 JSON 文件下載"}}'),delete t.options._Ctor}},"1f7e":function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"zh-CN":{"Emitter":"发送方","Event":"事件","Receiver":"接收方","Data":"数据"}}'),delete t.options._Ctor}},"21a6":function(t,e,n){(function(n){var o,a,i;(function(n,s){a=[],o=s,i="function"===typeof o?o.apply(e,a):o,void 0===i||(t.exports=i)})(0,(function(){"use strict";function e(t,e){return"undefined"==typeof e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}function o(t,e,n){var o=new XMLHttpRequest;o.open("GET",t),o.responseType="blob",o.onload=function(){r(o.response,e,n)},o.onerror=function(){console.error("could not download file")},o.send()}function a(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function i(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(o){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var s="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n&&n.global===n?n:void 0,c=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),r=s.saveAs||("object"!=typeof window||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!c?function(t,e,n){var c=s.URL||s.webkitURL,r=document.createElement("a");e=e||t.name||"download",r.download=e,r.rel="noopener","string"==typeof t?(r.href=t,r.origin===location.origin?i(r):a(r.href)?o(t,e,n):i(r,r.target="_blank")):(r.href=c.createObjectURL(t),setTimeout((function(){c.revokeObjectURL(r.href)}),4e4),setTimeout((function(){i(r)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,n,s){if(n=n||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(e(t,s),n);else if(a(t))o(t,n,s);else{var c=document.createElement("a");c.href=t,c.target="_blank",setTimeout((function(){i(c)}))}}:function(t,e,n,a){if(a=a||open("","_blank"),a&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof t)return o(t,e,n);var i="application/octet-stream"===t.type,r=/constructor/i.test(s.HTMLElement)||s.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||i&&r||c)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var t=u.result;t=l?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=t:location=t,a=null},u.readAsDataURL(t)}else{var f=s.URL||s.webkitURL,d=f.createObjectURL(t);a?a.location=d:location.href=d,a=null,setTimeout((function(){f.revokeObjectURL(d)}),4e4)}});s.saveAs=r.saveAs=r,t.exports=r}))}).call(this,n("c8ba"))},"2c4a":function(t,e,n){},"2c5a":function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"zh-TW":{"Data":"資料","Emitter":"傳送方","Event":"事件","Receiver":"接收方"}}'),delete t.options._Ctor}},"3c9d":function(t,e,n){},"3ca36":function(t,e,n){"use strict";var o=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{id:"JSONViewerDialog",visible:t.show,"close-on-click-modal":!1,"custom-class":"long-text-dialog"},on:{"update:visible":function(e){t.show=e}}},[e("template",{slot:"title"},[t._v("\n    "+t._s(t.title)+"\n    "),e("span",{staticClass:"press-esc-to-close-tip"},[t._v(t._s(t.$t("Press ESC to close")))])]),t._v(" "),e("div",[t.showDownload&&t.content?e("div",{staticClass:"download-link"},[e("el-link",{attrs:{type:"primary"},on:{click:t.download}},[t._v("\n        "+t._s(t.$t("Download as a JSON file"))+"\n        "),e("i",{staticClass:"fa fa-fw fa-download"})])],1):t._e(),t._v(" "),e("json-viewer",{attrs:{value:t.jsonContent,theme:"json-view-theme","show-double-quotes":"","show-array-index":!1}})],1)],2)},a=[],i=(n("b64b"),n("21a6")),s=n.n(i),c={name:"JSONViewerDialog",components:{},watch:{},methods:{update:function(t,e){this.content=t,this.fileName=e,this.show=!0},download:function(){var t=new Blob([this.content],{type:"text/plain"}),e=this.fileName||"file-".concat(this.M().format("YYYYMMDD_HHmmss"),".json");s.a.saveAs(t,e)}},computed:{jsonContent:function(){return"string"===typeof this.content?JSON.parse(this.content):this.content}},props:{title:String,showDownload:Boolean},data:function(){return{show:!1,fileName:null,content:null}}},r=c,l=(n("d327"),n("5e2d"),n("2877")),u=n("9472"),f=n("8d3f"),d=n("5ce0"),p=Object(l["a"])(r,o,a,!1,null,"edb41548",null);"function"===typeof u["default"]&&Object(u["default"])(p),"function"===typeof f["default"]&&Object(f["default"])(p),"function"===typeof d["default"]&&Object(d["default"])(p);e["a"]=p.exports},"3cdd":function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"zh-HK":{"Data":"數據","Emitter":"發送方","Event":"事件","Receiver":"接收方"}}'),delete t.options._Ctor}},"5a67":function(t,e,n){"use strict";var o=n("3cdd"),a=n.n(o);e["default"]=a.a},"5ce0":function(t,e,n){"use strict";var o=n("c25e"),a=n.n(o);e["default"]=a.a},"5ce2":function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"zh-CN":{"Download as a JSON file":"作为 JSON 文件下载"}}'),delete t.options._Ctor}},"5e2d":function(t,e,n){"use strict";n("00f1")},"8cda":function(t,e,n){"use strict";n("2c4a")},"8d3f":function(t,e,n){"use strict";var o=n("0cf1"),a=n.n(o);e["default"]=a.a},9472:function(t,e,n){"use strict";var o=n("5ce2"),a=n.n(o);e["default"]=a.a},"9ed0":function(t,e,n){"use strict";n.r(e);n("e9c4");var o=function(){var t=this,e=t._self._c;return e("transition",{attrs:{name:"fade"}},[e("el-container",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.isLoaded,expression:"$store.state.isLoaded"}],attrs:{direction:"vertical"}},[e("el-header",{attrs:{height:"60px"}},[e("div",{staticClass:"common-page-header"},[e("h1",[t._v("WebSocket")]),t._v(" "),e("div",{staticClass:"header-control"},[e("el-select",{staticClass:"event-filter",attrs:{size:"small",clearable:"",placeholder:t.$t("Filter Event")},model:{value:t.filterEvent,callback:function(e){t.filterEvent=e},expression:"filterEvent"}},t._l(t.events,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),t._v(" "),e("el-select",{staticClass:"connector-filter",attrs:{size:"small",clearable:"",placeholder:t.$t("Filter Connector")},model:{value:t.filterConnector,callback:function(e){t.filterConnector=e},expression:"filterConnector"}},t._l(t.connectors,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),t._v(" "),e("el-input",{staticClass:"filter-input",attrs:{placeholder:t.$t("Filter"),size:"small"},on:{input:t.onFilterChange},model:{value:t.filterInput,callback:function(e){t.filterInput=e},expression:"filterInput"}},[t.filterInput?e("i",{staticClass:"el-input__icon el-icon-close text-main",attrs:{slot:"prefix"},on:{click:function(e){t.filterInput="",t.onFilterChange()}},slot:"prefix"}):t._e()])],1)])]),t._v(" "),e("el-main",{staticClass:"common-table-container"},[e("el-table",{staticClass:"common-table",attrs:{height:"100%",size:"mini","default-sort":{prop:"timestampMs",order:"descending"},data:t.filteredData}},[e("el-table-column",{attrs:{label:t.$t("Seq"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",[t._v(t._s(n.row.seq))])]}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"timestampMs",sortable:"","sort-orders":["ascending","descending"],label:t.$t("Time"),width:"180"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",[t._v(t._s(t._f("datetime")(n.row.timestampMs)))])]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Connector"),width:"280"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",{staticClass:"text-info"},[t._v("ID")]),t._v("\n             "),e("code",{staticClass:"text-main"},[t._v(t._s(n.row.connectorId))]),t._v(" "),e("br"),t._v(" "),e("span",{staticClass:"text-info"},[t._v("API Key ID")]),t._v("\n             "),e("code",{staticClass:"text-main"},[t._v(t._s(n.row.guanceAPIKeyId))])]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Emitter"),align:"right",width:"140"},scopedSlots:t._u([{key:"default",fn:function(n){return["event"===n.row.type?[e("span",{staticClass:"event-from"},[t._v(t._s(n.row.from))])]:[e("span",{staticClass:"event-to"},[t._v(t._s(n.row.to))])]]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Event"),align:"center",width:"150"},scopedSlots:t._u([{key:"default",fn:function(n){return["event"===n.row.type?[e("small",[t._v(t._s(n.row.type))]),t._v(" "),e("i",{staticClass:"fa fa-fw fa-long-arrow-right"})]:[e("i",{staticClass:"fa fa-fw fa-long-arrow-left"}),t._v(" "),e("small",[t._v(t._s(n.row.type))])],t._v(" "),e("br"),e("code",{class:{"text-theme":n.row.event.indexOf(".ack")<0}},[t._v(t._s(n.row.event))])]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Receiver"),align:"left",width:"140"},scopedSlots:t._u([{key:"default",fn:function(n){return["event"===n.row.type?[e("span",{staticClass:"event-to"},[t._v(t._s(n.row.to))])]:[e("span",{staticClass:"event-from"},[t._v(t._s(n.row.from))])]]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Data")},scopedSlots:t._u([{key:"default",fn:function(n){return[e("pre",[t._v(t._s(JSON.stringify(n.row.data)))])]}}])}),t._v(" "),e("el-table-column",{attrs:{align:"right",width:"150"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.showDetail(n.row)}}},[t._v(t._s(t.$t("Show detail")))])]}}])})],1)],1),t._v(" "),e("JSONViewerDialog",{ref:"jsonViewerDialog",attrs:{showDownload:!0,mode:"json"}})],1)],1)},a=[],i=n("c7eb"),s=n("1da1"),c=(n("99af"),n("4de4"),n("d3b7"),n("07ac"),n("ac1f"),n("5319"),n("498a"),n("0643"),n("2382"),n("4e3e"),n("159b"),n("40f5")),r=n("3ca36"),l={name:"GuanceWebSocketDebugger",components:{JSONViewerDialog:r["a"]},watch:{$route:{immediate:!0,handler:function(t,e){var n=this;return Object(s["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n.loadData();case 2:case"end":return t.stop()}}),t)})))()}}},methods:{onFilterChange:Object(c["debounce"])((function(t){this.filterTEXT=t})),loadData:function(){var t=this;return Object(s["a"])(Object(i["a"])().mark((function e(){var n,o,a,s;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.T.callAPI_get("/api/v1/debug/recent-websocket-messages/do/get");case 2:if(n=e.sent,n&&n.ok){e.next=5;break}return e.abrupt("return");case 5:o=n.data,a={},s={},o.forEach((function(e){t.common.appendSearchKeywords(e,[e.connectorId,e.guanceAPIKeyId,e.event,JSON.stringify(e.data)]);var n=e.event.replace(/\.ack$/,"");s[n]={label:"".concat(t.$t("Event"),": ").concat(n," / .ack"),value:n};var o="".concat(e.connectorId,"/").concat(e.guanceAPIKeyId);a[o]={label:"".concat(t.$t("Connector")," ID: ").concat(e.connectorId," / API Key ID: ").concat(e.guanceAPIKeyId),value:o}})),t.data=o,t.connectors=Object.values(a),t.events=Object.values(s),t.$store.commit("updateLoadStatus",!0);case 13:case"end":return e.stop()}}),e)})))()},showDetail:function(t){var e=this.M(t.timestampMs).format("YYYYMMDD_HHmmss"),n="".concat(t.event,"-").concat(t.from,"-").concat(t.to,".").concat(e,".json"),o=this.T.jsonCopy(t);delete o.searchKeywords,this.$refs.jsonViewerDialog.update(o,n)}},computed:{filteredData:function(){var t=this,e=(this.filterTEXT||"").toLowerCase().trim(),n=this.data;if(e&&(n=this.common.filterByKeywords(e,n)),this.T.notNothing(this.filterEvent)&&(n=n.filter((function(e){return e.event===t.filterEvent||e.event==="".concat(t.filterEvent,".ack")}))),this.T.notNothing(this.filterConnector)){var o=this.filterConnector.split("/");n=n.filter((function(t){return t.connectorId===o[0]&&t.guanceAPIKeyId===o[1]}))}return n}},data:function(){return{data:[],events:[],connectors:[],filterInput:"",filterTEXT:"",filterEvent:{},filterConnector:{}}}},u=l,f=(n("8cda"),n("2877")),d=n("e29a"),p=n("5a67"),v=n("e934"),_=Object(f["a"])(u,o,a,!1,null,"f88bb940",null);"function"===typeof d["default"]&&Object(d["default"])(_),"function"===typeof p["default"]&&Object(p["default"])(_),"function"===typeof v["default"]&&Object(v["default"])(_);e["default"]=_.exports},c25e:function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"zh-TW":{"Download as a JSON file":"作為 JSON 檔案下載"}}'),delete t.options._Ctor}},d327:function(t,e,n){"use strict";n("3c9d")},e29a:function(t,e,n){"use strict";var o=n("1f7e"),a=n.n(o);e["default"]=a.a},e934:function(t,e,n){"use strict";var o=n("2c5a"),a=n.n(o);e["default"]=a.a}}]);