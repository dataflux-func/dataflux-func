(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e0536486"],{"1d5a":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-TW":{"Add Blueprint":"新增藍圖","Are you sure you want to delete the Blueprint?":"是否確認刪除此藍圖？","Blueprint ID will be used as Script Set ID after deployment":"藍圖 ID 在部署後將作為指令碼集 ID","Blueprint created":"藍圖已建立","Blueprint deleted":"藍圖已刪除","Blueprint saved":"藍圖已儲存","Cannot not starts with a number":"不得以數字開頭","ID cannot contains double underscore \\"__\\"":"不能包含雙下劃線 \\"__\\"","Only alphabets, numbers and underscore are allowed":"只能包含大小寫英文、數字及下劃線","Please input ID":"請輸入 ID","Setup Blueprint":"配置藍圖"}}'),delete e.options._Ctor}},"274e":function(e,t,a){"use strict";var n=a("5d9a"),r=a.n(n);t["default"]=r.a},"39dd":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-CN":{"Add Blueprint":"添加蓝图","Setup Blueprint":"配置蓝图","Blueprint ID will be used as Script Set ID after deployment":"蓝图 ID 在部署后将作为脚本集 ID","Please input ID":"请输入 ID","Only alphabets, numbers and underscore are allowed":"只能包含大小写英文、数字及下划线","Cannot not starts with a number":"不得以数字开头","ID cannot contains double underscore \\"__\\"":"不能包含双下划线 \\"__\\"","Blueprint created":"蓝图已创建","Blueprint saved":"蓝图已保存","Blueprint deleted":"蓝图已删除","Are you sure you want to delete the Blueprint?":"是否确认删除此蓝图？"}}'),delete e.options._Ctor}},"4c1b":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-CN":{"Blueprint deleted":"蓝图已删除","No Blueprint has ever been added":"从未添加过任何蓝图","Are you sure you want to delete the Blueprint?":"是否确认删除此蓝图？","Add Blueprint to deploy data processing flow in a visualization way":"添加蓝图，使用可视化方式部署数据处理流程"}}'),delete e.options._Ctor}},"5d9a":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-TW":{"Add Blueprint to deploy data processing flow in a visualization way":"新增藍圖，使用視覺化方式部署資料處理流程","Are you sure you want to delete the Blueprint?":"是否確認刪除此藍圖？","Blueprint deleted":"藍圖已刪除","No Blueprint has ever been added":"從未新增過任何藍圖"}}'),delete e.options._Ctor}},"8d07":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("transition",{attrs:{name:"fade"}},[t("el-container",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.isLoaded,expression:"$store.state.isLoaded"}],attrs:{direction:"vertical"}},[t("el-header",{attrs:{height:"60px"}},[t("div",{staticClass:"common-page-header"},[t("h1",[e._v(e._s(e.$t("Blueprint")))]),e._v(" "),t("div",{staticClass:"header-control"},[t("FuzzySearchInput",{attrs:{dataFilter:e.dataFilter}}),e._v(" "),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.openSetup(null,"add")}}},[t("i",{staticClass:"fa fa-fw fa-plus"}),e._v("\n            "+e._s(e.$t("New"))+"\n          ")])],1)])]),e._v(" "),t("el-main",{staticClass:"common-table-container"},[e.T.isNothing(e.data)?t("div",{staticClass:"no-data-area"},[e.T.isPageFiltered()?t("h1",{staticClass:"no-data-title"},[t("i",{staticClass:"fa fa-fw fa-search"}),e._v(e._s(e.$t("No matched data found")))]):t("h1",{staticClass:"no-data-title"},[t("i",{staticClass:"fa fa-fw fa-info-circle"}),e._v(e._s(e.$t("No Blueprint has ever been added")))]),e._v(" "),t("p",{staticClass:"no-data-tip"},[e._v("\n          "+e._s(e.$t("Add Blueprint to deploy data processing flow in a visualization way"))+"\n        ")])]):t("el-table",{staticClass:"common-table",attrs:{height:"100%",data:e.data,"row-class-name":e.common.getHighlightRowCSS}},[t("el-table-column",{attrs:{label:"ID",width:"220"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("code",{staticClass:"text-main text-small"},[e._v(e._s(a.row.id))]),e._v(" "),t("CopyButton",{attrs:{content:a.row.id}})]}}])}),e._v(" "),t("el-table-column",{attrs:{label:e.$t("Title")},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.title))])]}}])}),e._v(" "),t("el-table-column",{attrs:{width:"135"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{staticStyle:{width:"100px"},attrs:{type:"primary",size:"small",plain:""},on:{click:function(t){return e.openContents(a.row)}}},[t("i",{staticClass:"fa fa-fw fa-th-large"}),e._v("\n              "+e._s(e.$t("Enter"))+"\n            ")])]}}])}),e._v(" "),t("el-table-column",{attrs:{align:"right",width:"200"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-link",{on:{click:function(t){return e.openSetup(a.row,"setup")}}},[e._v(e._s(e.$t("Setup")))]),e._v(" "),t("el-link",{attrs:{type:"danger"},on:{click:function(t){return e.quickSubmitData(a.row,"delete")}}},[e._v(e._s(e.$t("Delete")))])]}}])})],1)],1),e._v(" "),t("Pager",{attrs:{pageInfo:e.pageInfo}}),e._v(" "),t("BlueprintSetup",{ref:"setup"})],1)],1)},r=[],i=a("c7eb"),s=a("1da1"),o=(a("14d9"),a("a4d3"),a("e01a"),function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{id:"ScriptSetSetup",visible:e.show,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"750px"},on:{"update:visible":function(t){e.show=t}}},[t("template",{slot:"title"},[e._v("\n    "+e._s(e.pageTitle)+" "),"setup"===e.pageMode?t("code",{staticClass:"text-main"},[e._v(e._s(e.data.title||e.data.id))]):e._e()]),e._v(" "),t("el-container",{attrs:{direction:"vertical"}},[t("el-main",[t("div",{staticClass:"setup-form"},[t("el-form",{ref:"form",attrs:{"label-width":"135px",model:e.form,rules:e.formRules}},[t("el-form-item",{attrs:{label:"ID",prop:"id"}},[t("el-input",{attrs:{disabled:"setup"===e.pageMode,maxlength:"60"},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}}),e._v(" "),t("InfoBlock",{attrs:{title:e.$t("Blueprint ID will be used as Script Set ID after deployment")}})],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("Title")}},[t("el-input",{attrs:{placeholder:e.$t("Optional"),maxlength:"200"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("Description")}},[t("el-input",{attrs:{placeholder:e.$t("Optional"),type:"textarea",resize:"none",autosize:{minRows:2},maxlength:"5000"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),e._v(" "),t("el-form-item",{staticClass:"setup-footer"},["setup"===e.pageMode?t("el-link",{staticClass:"float-left",attrs:{type:"danger"},on:{click:e.deleteData}},[e._v(e._s(e.$t("Delete")))]):e._e(),e._v(" "),t("el-button",{directives:[{name:"prevent-re-click",rawName:"v-prevent-re-click"}],attrs:{type:"primary"},on:{click:e.submitData}},[e._v(e._s(e.$t("Save")))])],1)],1)],1)])],1)],2)}),u=[],l=(a("d9e2"),a("b64b"),a("d3b7"),a("0643"),a("4e3e"),a("159b"),{name:"BlueprintSetup",components:{},watch:{show:function(e){e||this.$root.$emit("reload.blueprintList")}},methods:{loadData:function(e){var t=this;return Object(s["a"])(Object(i["a"])().mark((function a(){var n,r;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e){a.next=6;break}t.pageMode="add",t.T.jsonClear(t.form),t.data={},a.next=17;break;case 6:return t.pageMode="setup",t.data.id=e,a.next=10,t.T.callAPI_getOne("/api/v1/blueprints/do/list",t.data.id);case 10:if(n=a.sent,n&&n.ok){a.next=13;break}return a.abrupt("return");case 13:t.data=n.data,r={},Object.keys(t.form).forEach((function(e){return r[e]=t.data[e]})),t.form=r;case 17:t.show=!0;case 18:case"end":return a.stop()}}),a)})))()},submitData:function(){var e=this;return Object(s["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$refs.form.validate();case 3:t.next=8;break;case 5:return t.prev=5,t.t0=t["catch"](0),t.abrupt("return",console.error(t.t0));case 8:t.t1=e.pageMode,t.next="add"===t.t1?11:"setup"===t.t1?14:17;break;case 11:return t.next=13,e.addData();case 13:return t.abrupt("return",t.sent);case 14:return t.next=16,e.modifyData();case 16:return t.abrupt("return",t.sent);case 17:case"end":return t.stop()}}),t,null,[[0,5]])})))()},addData:function(){var e=this;return Object(s["a"])(Object(i["a"])().mark((function t(){var a,n;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.T.callAPI("post","/api/v1/blueprints/do/add",{body:{data:e.T.jsonCopy(e.form)},feedback:{okMessage:e.$t("Blueprint created")}});case 2:if(a=t.sent,a&&a.ok){t.next=5;break}return t.abrupt("return");case 5:n=e.T.packRouteQuery(),e.$store.commit("updateHighlightedTableDataId",a.data.id),e.show=!1,e.$router.push({name:"blueprint-canvas",params:{id:a.data.id},query:n});case 9:case"end":return t.stop()}}),t)})))()},modifyData:function(){var e=this;return Object(s["a"])(Object(i["a"])().mark((function t(){var a,n;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.T.jsonCopy(e.form),delete a.id,t.next=4,e.T.callAPI("post","/api/v1/blueprints/:id/do/modify",{params:{id:e.data.id},body:{data:a},feedback:{okMessage:e.$t("Blueprint saved")}});case 4:if(n=t.sent,n&&n.ok){t.next=7;break}return t.abrupt("return");case 7:e.$store.commit("updateHighlightedTableDataId",n.data.id),e.show=!1;case 9:case"end":return t.stop()}}),t)})))()},deleteData:function(){var e=this;return Object(s["a"])(Object(i["a"])().mark((function t(){var a;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.T.confirm(e.$t("Are you sure you want to delete the Blueprint?"));case 2:if(t.sent){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,e.T.callAPI("/api/v1/blueprints/:id/do/delete",{params:{id:e.data.id},feedback:{okMessage:e.$t("Blueprint deleted")}});case 6:if(a=t.sent,a&&a.ok){t.next=9;break}return t.abrupt("return");case 9:e.show=!1;case 10:case"end":return t.stop()}}),t)})))()}},computed:{pageTitle:function(){var e={setup:this.$t("Setup Blueprint"),add:this.$t("Add Blueprint")};return e[this.pageMode]}},data:function(){var e=this;return{show:!1,pageMode:null,data:{},form:{id:null,title:null,description:null},formRules:{id:[{trigger:"blur",message:this.$t("Please input ID"),required:!0},{trigger:"change",message:this.$t("Only alphabets, numbers and underscore are allowed"),pattern:/^[a-zA-Z0-9_]*$/g},{trigger:"change",message:this.$t("Cannot not starts with a number"),pattern:/^[^0-9]/g},{trigger:"change",validator:function(t,a,n){if(a&&a.indexOf("__")>=0){var r=e.$t('ID cannot contains double underscore "__"');return n(new Error(r))}return n()}}]}}}}),d=l,c=a("2877"),p=a("9a2e"),f=a("fd23"),b=a("afa3"),h=Object(c["a"])(d,o,u,!1,null,"65cd2f44",null);"function"===typeof p["default"]&&Object(p["default"])(h),"function"===typeof f["default"]&&Object(f["default"])(h),"function"===typeof b["default"]&&Object(b["default"])(h);var m=h.exports,_={name:"BlueprintList",components:{BlueprintSetup:m},watch:{$route:{immediate:!0,handler:function(e,t){var a=this;return Object(s["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.loadData();case 2:case"end":return e.stop()}}),e)})))()}}},methods:{loadData:function(){var e=this;return Object(s["a"])(Object(i["a"])().mark((function t(){var a,n;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.dataFilter=e.T.createListQuery({fields:["id","title","createTime"],sort:["-seq"]}),t.next=3,e.T.callAPI_get("/api/v1/blueprints/do/list",{query:a});case 3:if(n=t.sent,n&&n.ok){t.next=6;break}return t.abrupt("return");case 6:e.data=n.data,e.pageInfo=n.pageInfo,e.$store.commit("updateLoadStatus",!0);case 9:case"end":return t.stop()}}),t)})))()},quickSubmitData:function(e,t){var a=this;return Object(s["a"])(Object(i["a"])().mark((function n(){var r;return Object(i["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:n.t0=t,n.next="delete"===n.t0?3:8;break;case 3:return n.next=5,a.T.confirm(a.$t("Are you sure you want to delete the Blueprint?"));case 5:if(n.sent){n.next=7;break}return n.abrupt("return");case 7:return n.abrupt("break",8);case 8:r=null,n.t1=t,n.next="delete"===n.t1?12:16;break;case 12:return n.next=14,a.T.callAPI("/api/v1/blueprints/:id/do/delete",{params:{id:e.id},feedback:{okMessage:a.$t("Blueprint deleted")}});case 14:return r=n.sent,n.abrupt("break",16);case 16:if(r&&r.ok){n.next=18;break}return n.abrupt("return");case 18:return a.$store.commit("updateHighlightedTableDataId",e.id),n.next=21,a.loadData();case 21:case"end":return n.stop()}}),n)})))()},openSetup:function(e,t){switch(t){case"add":this.$refs.setup.loadData();break;case"setup":this.$store.commit("updateHighlightedTableDataId",e.id),this.$refs.setup.loadData(e.id);break}},openContents:function(e){var t=this.T.packRouteQuery();this.$store.commit("updateHighlightedTableDataId",e.id),this.$router.push({name:"blueprint-canvas",params:{id:e.id},query:t})}},computed:{},props:{},data:function(){var e=this.T.createPageInfo(),t=this.T.createListQuery();return{data:[],pageInfo:e,dataFilter:{_fuzzySearch:t._fuzzySearch}}},created:function(){this.$root.$on("reload.blueprintList",this.loadData)},destroyed:function(){this.$root.$off("reload.blueprintList")}},v=_,w=a("9fbd"),y=a("b9e3"),g=a("274e"),k=Object(c["a"])(v,n,r,!1,null,"14055fc0",null);"function"===typeof w["default"]&&Object(w["default"])(k),"function"===typeof y["default"]&&Object(y["default"])(k),"function"===typeof g["default"]&&Object(g["default"])(k);t["default"]=k.exports},"9a2e":function(e,t,a){"use strict";var n=a("39dd"),r=a.n(n);t["default"]=r.a},"9fbd":function(e,t,a){"use strict";var n=a("4c1b"),r=a.n(n);t["default"]=r.a},a7d5:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-HK":{"Add Blueprint":"添加藍圖","Are you sure you want to delete the Blueprint?":"是否確認刪除此藍圖？","Blueprint ID will be used as Script Set ID after deployment":"藍圖 ID 在部署後將作為腳本集 ID","Blueprint created":"藍圖已創建","Blueprint deleted":"藍圖已刪除","Blueprint saved":"藍圖已保存","Cannot not starts with a number":"不得以數字開頭","ID cannot contains double underscore \\"__\\"":"不能包含雙下劃線 \\"__\\"","Only alphabets, numbers and underscore are allowed":"只能包含大小寫英文、數字及下劃線","Please input ID":"請輸入 ID","Setup Blueprint":"配置藍圖"}}'),delete e.options._Ctor}},afa3:function(e,t,a){"use strict";var n=a("1d5a"),r=a.n(n);t["default"]=r.a},b9e3:function(e,t,a){"use strict";var n=a("e661"),r=a.n(n);t["default"]=r.a},e661:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-HK":{"Add Blueprint to deploy data processing flow in a visualization way":"添加藍圖，使用可視化方式部署數據處理流程","Are you sure you want to delete the Blueprint?":"是否確認刪除此藍圖？","Blueprint deleted":"藍圖已刪除","No Blueprint has ever been added":"從未添加過任何藍圖"}}'),delete e.options._Ctor}},fd23:function(e,t,a){"use strict";var n=a("a7d5"),r=a.n(n);t["default"]=r.a}}]);